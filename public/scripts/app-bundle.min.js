"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkamazon_price_watcher"] = self["webpackChunkamazon_price_watcher"] || []).push([["app"],{

/***/ "./src-frontend/scripts/api.js":
/*!*************************************!*\
  !*** ./src-frontend/scripts/api.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    amazonPriceWatcher: {\r\n        search: function(callback) {\r\n            axios__WEBPACK_IMPORTED_MODULE_0___default().get(\"api/search\").then(\r\n                (response) => {\r\n                    if (callback && typeof callback === \"function\") {\r\n                        callback(response);\r\n                    }\r\n                }\r\n            ).catch(\r\n                (error) => {\r\n                    if (callback && typeof callback === \"function\") {\r\n                        callback(error.response);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    },\r\n    amazon: {\r\n        scrap: function (url, callback) {\r\n            axios__WEBPACK_IMPORTED_MODULE_0___default().post(\"api/scrap\", { url: url }).then(\r\n                (response) => {\r\n                    if (callback && typeof callback === \"function\") {\r\n                        callback(response);\r\n                    }\r\n                }\r\n            ).catch(\r\n                (error) => {\r\n                    if (callback && typeof callback === \"function\") {\r\n                        callback(error.response);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    }\r\n});\n\n//# sourceURL=webpack://amazon-price-watcher/./src-frontend/scripts/api.js?");

/***/ }),

/***/ "./src-frontend/scripts/app.js":
/*!*************************************!*\
  !*** ./src-frontend/scripts/app.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ \"./node_modules/vue/dist/vue.esm-bundler.js\");\n/* harmony import */ var _routes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./routes.js */ \"./src-frontend/scripts/routes.js\");\n\r\n\r\n\r\n\r\n/**\r\n * main app component\r\n */\r\nconst amazonPriceWatcherApp = {\r\n    data: function () {\r\n        return ({\r\n        });\r\n    },\r\n    created: function() {\r\n        if (this.$route.name != 'main') {\r\n            this.$router.push({ name: 'main' });\r\n        }\r\n    }\r\n};\r\n\r\nlet app = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createApp)(amazonPriceWatcherApp);\r\n\r\napp.use(_routes_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]).mount('#app');\n\n//# sourceURL=webpack://amazon-price-watcher/./src-frontend/scripts/app.js?");

/***/ }),

/***/ "./src-frontend/scripts/routes.js":
/*!****************************************!*\
  !*** ./src-frontend/scripts/routes.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var vue_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vue-router */ \"./node_modules/vue-router/dist/vue-router.esm-bundler.js\");\n/* harmony import */ var _vue_components_main_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vue-components/main.js */ \"./src-frontend/scripts/vue-components/main.js\");\n\r\n\r\n\r\n/**\r\n * vue-router route definitions\r\n */\r\nconst routes = [\r\n    { path: '/main', name: 'main', component: _vue_components_main_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] }\r\n];\r\n\r\n/**\r\n* main vue-router component inicialization\r\n*/\r\nconst router = (0,vue_router__WEBPACK_IMPORTED_MODULE_1__.createRouter)({\r\n    history: (0,vue_router__WEBPACK_IMPORTED_MODULE_1__.createWebHashHistory)(),\r\n    routes\r\n});\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://amazon-price-watcher/./src-frontend/scripts/routes.js?");

/***/ }),

/***/ "./src-frontend/scripts/vue-components/main.js":
/*!*****************************************************!*\
  !*** ./src-frontend/scripts/vue-components/main.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api.js */ \"./src-frontend/scripts/api.js\");\n\r\n\r\nconst template = function () {\r\n    return `\r\n        <section class=\"section\">\r\n            <div class=\"field has-addons\">\r\n                <div class=\"control is-expanded has-icons-left has-icons-right\">\r\n                    <input class=\"input is-medium\" type=\"email\" placeholder=\"Type amazon URL\" v-model.trim=\"url\" :disabled=\"loading\" @click.prevent=\"$event.target.select()\">\r\n                    <span class=\"icon is-left\">\r\n                        <i class=\"fab fa-amazon\"></i>\r\n                    </span>\r\n                    <span class=\"icon is-right\" v-if=\"isValidURL\">\r\n                        <i class=\"fas fa-check\"></i>\r\n                    </span>\r\n                    <span class=\"icon is-right\" v-if=\"! isValidURL\">\r\n                        <i class=\"fas fa-exclamation-triangle\"></i>\r\n                    </span>\r\n                </div>\r\n                <div class=\"control\">\r\n                <button type=\"button\" class=\"button is-info is-medium\" :disabled=\"loading || ! isValidURL\" @click.prevent=\"scrap\">\r\n                    <span class=\"icon is-small\">\r\n                        <i class=\"fas\" :class=\"{ 'fa-search': ! loading, 'fa-cog fa-spin': loading }\"></i>\r\n                    </span>\r\n                    <span>Scrap!</span>\r\n                </button>\r\n                </div>\r\n            </div>\r\n            <table class=\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\">\r\n                <thead>\r\n                    <tr>\r\n                        <th style=\"width: 50%\">Article</th>\r\n                        <th class=\"has-text-right\">Price</th>\r\n                        <th class=\"has-text-right\">Previous price</th>\r\n                        <th class=\"has-text-right\">Increment</th>\r\n                        <th>Updated</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody v-for=\"group in groups\">\r\n                    <tr class=\"has-background-grey-lighter has-text-black\" style=\"cursor: pointer;\" @click.prevent=\"hideItems = !hideItems\">\r\n                        <th><i class=\"fas\" :class=\"{ 'fa-angle-double-up': ! hideItems, 'fa-angle-double-down': hideItems }\"></i> {{ group.name }}</th>\r\n                        <th class=\"has-text-right\">{{ group.price }}{{ group.currency }}</th>\r\n                        <th class=\"has-text-right\">{{ group.previousPrice }}{{ group.currency }}</th>\r\n                        <td class=\"has-text-right has-text-weight-bold has-text-danger\"><i class=\"fa-fw fas fa-sort-amount-up is-pulled-left\"></i> <span class=\"is-pulled-right\">{{ (group.previousPrice - group.price).toFixed(2) }}{{ group.currency }}</span></td>\r\n                        <th>1 minute ago</th>\r\n                    </tr>\r\n                    <tr v-for=\"item in group.items\">\r\n                        <td style=\"width: 50%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\" :title=\"item.name\"><i class=\"fas fa-bookmark cursor-pointer\" @click.prevent=\"onShowItemDetails(item)\"></i> {{ item.name.substring(0, 80) }}...</td>\r\n                        <td class=\"has-text-right\">{{ item.price.toFixed(2) }}€</td>\r\n                        <td class=\"has-text-right\">{{ (item.previousPrice).toFixed(2) }}€</td>\r\n                        <td class=\"has-text-right has-text-weight-bold has-text-success\" v-if=\"(item.previousPrice - item.price) < 0\"><i class=\"fa-fw fas fa-sort-amount-down is-pulled-left\"></i> <span class=\"is-pulled-right\">{{ (item.previousPrice - item.price).toFixed(2)}}{{ item.currency }}</span></td>\r\n                        <td class=\"has-text-right has-text-weight-bold has-text-danger\" v-else><i class=\"fas fa-sort-amount-up is-pulled-left\"></i> <span class=\"is-pulled-right\">+{{(item.previousPrice - item.price).toFixed(2) }}{{ item.currency }}</span></td>\r\n                        <th>1 hour ago</th>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody>\r\n                    <tr class=\"has-background-grey-lighter has-text-black\" style=\"cursor: pointer;\" @click.prevent=\"hideItems = !hideItems\">\r\n                        <th colspan=\"5\">Orphaned items</th>\r\n                    </tr>\r\n                    <tr v-for=\"item in items\">\r\n                        <td style=\"width: 50%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\" :title=\"item.name\"><i class=\"fas fa-bookmark cursor-pointer\" @click.prevent=\"onShowItemDetails(item)\"></i> {{ item.name.substring(0, 80) }}...</td>\r\n                        <td class=\"has-text-right\">{{ item.price.toFixed(2) }}€</td>\r\n                        <td class=\"has-text-right\">{{ (item.previousPrice).toFixed(2) }}€</td>\r\n                        <td class=\"has-text-right has-text-weight-bold has-text-success\" v-if=\"(item.previousPrice - item.price) < 0\"><i class=\"fa-fw fas fa-sort-amount-down is-pulled-left\"></i> <span class=\"is-pulled-right\">{{ (item.previousPrice - item.price).toFixed(2)}}{{ item.currency }}</span></td>\r\n                        <td class=\"has-text-right has-text-weight-bold has-text-danger\" v-else><i class=\"fas fa-sort-amount-up is-pulled-left\"></i> <span class=\"is-pulled-right\">+{{(item.previousPrice - item.price).toFixed(2) }}{{ item.currency }}</span></td>\r\n                        <th>2 days ago</th>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <div class=\"card\" v-if=\"productData\">\r\n                <div class=\"card-content\">\r\n                    <div class=\"content\" v-if=\"productData.name\">\r\n                        <h4 class=\"has-text-danger\" v-if=\"productData.affiliate\"><i class=\"fas fa-exclamation-triangle\"></i> This post may contain affiliate links ({{ productData.affiliate }}), which means that the original link creator may receive a commission if you make a purchase using these links.</h4>\r\n                        <h1 class=\"title is-4\">{{ productData.name }}</h1>\r\n                        <div class=\"columns is-vcentered\">\r\n                            <div class=\"column is-half\">\r\n                                <p class=\"title is-5\" v-if=\"productData.price && productData.currency\">Price: {{ productData.price.toFixed(2) }}{{ productData.currency }}</p>\r\n                                <figure class=\"image\">\r\n                                    <a :href=\"'https://es.camelcamelcamel.com/product/' + productData.asin\" rel=\"noreferrer\" target=\"_blank\">\r\n                                        <img :src=\"productData.chartURL\" alt=\"Camel Camel Camel Chart\">\r\n                                    </a>\r\n                                </figure>\r\n                            </div>\r\n                            <div class=\"column is-half\">\r\n                                <p class=\"title is-5\" v-if=\"productData.stock\">Stock: {{ productData.stock }}</p>\r\n                                <figure class=\"image\">\r\n                                    <img :src=\"productData.imageURL\" alt=\"Product Image\" style=\"width: 320px;\">\r\n                                </figure>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"content\" v-else>\r\n                        <p class=\"title is-4 has-text-danger has-text-centered\" v-else-if=\"notFound\"><i class=\"fas fa-exclamation-triangle\"></i> Product not scraped</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <p class=\"title is-4 has-text-danger has-text-centered\" v-else-if=\"notFound\"><i class=\"fas fa-exclamation-triangle\"></i> Product not found</p>\r\n        </section>\r\n    `;\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    name: 'amazon-price-watcher-main',\r\n    template: template(),\r\n    data: function () {\r\n        return ({\r\n            loading: false,\r\n            url: null,\r\n            isValidURL: false,\r\n            productData: null,\r\n            notFound: false,\r\n            hideItems: false,\r\n            groups: [],\r\n            items: []\r\n        });\r\n    },\r\n    created: function() {\r\n        _api_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].amazonPriceWatcher.search((response) => {\r\n            if (response.status == 200) {\r\n                this.groups = response.data.groups;\r\n                this.items = response.data.items;\r\n            }\r\n        });\r\n    },\r\n    computed: {\r\n        /*\r\n        validURL: function () {\r\n            if (this.url) {\r\n                return (true);\r\n            } else {\r\n                return (false);\r\n            }\r\n        },\r\n        invalidURL: function () {\r\n            if (!this.url) {\r\n                return (true);\r\n            } else {\r\n                return (false);\r\n            }\r\n        },\r\n        */\r\n    },\r\n    watch: {\r\n        url: function (newValue, oldValue) {\r\n            if (newValue) {\r\n                let parsedURL = null;\r\n                let isValid = false;\r\n                // https://stackoverflow.com/a/43467144\r\n                try {\r\n                    parsedURL = new URL(newValue);\r\n                    isValid = true;\r\n                } catch (e) {\r\n                }\r\n                this.isValidURL = isValid && (parsedURL.protocol === \"http:\" || parsedURL.protocol === \"https:\");\r\n            } else {\r\n                this.isValidURL = false;\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        scrap: function () {\r\n            this.loading = true;\r\n            this.productData = null;\r\n            this.notFound = false;\r\n            _api_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].amazon.scrap(this.url, (response) => {\r\n                this.loading = false;\r\n                if (response.status == 200) {\r\n                    this.productData = response.data.product;\r\n                    //console.log(this.items);\r\n                    //console.log(this.productData);\r\n                    //this.items.push(this.productData);\r\n                    console.log(this.productData);\r\n                } else {\r\n                    switch (response.status) {\r\n                        case 400:\r\n                            this.isValidURL = false;\r\n                        default:\r\n                        case 404:\r\n                            this.notFound = true;\r\n                            break;\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        onShowItemDetails: function(item) {\r\n            this.productData = item;\r\n        }\r\n    }\r\n});\n\n//# sourceURL=webpack://amazon-price-watcher/./src-frontend/scripts/vue-components/main.js?");

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./src-frontend/scripts/app.js"));
/******/ }
]);